var Vector=function(t,i,s){return this.x=t||0,this.y=i||0,this.z=s||0,this.stablize(),this};Vector.prototype={add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.stablize(),this},subtract:function(t,i){if(i){var s=this.x-t.x,e=this.y-t.y,h=this.z-t.z,n=new Vector(s,e,h);return n.stablize(),n}return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.stablize(),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.stablize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.stablize(),this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.stablize(),this},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.stablize(),this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.stablize(),this},divideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this.stablize(),this},normalize:function(){var t=1/this.length();return this.x*=t,this.y*=t,this.z*=t,this},stablize:function(){for(var t=[this.x,this.y,this.z],i=0;i<t.length;i++)(null===t[i]||void 0===t[i])&&(t[i]=0)},copy:function(){return new Vector(this.x,this.y,this.z)},clone:function(){return new Vector(this.x,this.y,this.z)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+(this.z+this.z))},lengthSquared:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+(this.z+this.z));return t*=t},toClipspace:function(){}},Vector.dist=function(t,i){var s=t.x-i.x,e=t.y-i.y,h=t.z-i.z,n=s*s+e*e+h*h;return Math.sqrt(n)};var COLOURS=["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FF4E50","#F9D423"],System=function(t,i){var t=void 0!==t?t:10;this.sketch=i,this.particles=[],this.pool,this.addParticles(t)};System.prototype={addParticles:function(t,i,s){for(var e=(this.pool,this.particles),h=0;t>h;++h)particle=new Particle(i,s,random(5,40)),particle.ctx=this.sketch,particle.wander=random(.5,2),particle.color=random(COLOURS),particle.drag=random(.9,.99),theta=random(TWO_PI),force=random(2,8),particle.vx=sin(theta)*force,particle.vy=cos(theta)*force,particle.neighbors=e,e.push(particle)},update:function(){for(var t=this.particles.length,i=0;t>i;++i)void 0===this.particles[i]||this.particles[i].alive?void 0!==this.particles[i]&&this.particles[i].update():this.particles.splice(i,1)[0]},draw:function(){for(var t=this.particles.length,i=0;t>i;++i)this.particles[i].draw()}};var Particle=function(t,i,s,e){this.alive=!0,this.ctx=e,this.radius=s||10,this.wander=.15,this.theta=random(TWO_PI),this.drag=.92,this.color="#fff",this.neighbors=[],this.pos=new Vector,this.x=t||0,this.y=i||0,this.pos.x=this.x,this.pos.y=this.y,this.vel=new Vector};Particle.prototype={setup:function(){},update:function(){this.theta+=random(-.5,.5)*this.wander,this.vel.x=random(TWO_PI)*this.drag,this.vel.y=random(TWO_PI)*this.drag,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.radius*=.96,this.alive=this.radius>.5},align:function(){},draw:function(){ctx=this.ctx,ctx.beginPath(),ctx.arc(this.pos.x,this.pos.y,this.radius,0,TWO_PI),ctx.fillStyle=this.color,ctx.fill()}};var MAX_PARTICLES=280,particles=[],pool=[],sketch=Sketch.create({container:document.getElementById("sketch")}),mouse_down=!1,system=new System(200,sketch);sketch.setup=function(){},sketch.update=function(){system.update()},sketch.draw=function(){sketch.globalCompositionOperation="lighter",system.draw()},sketch.mousedown=function(){mouse_down=!0},sketch.mouseup=function(){mouse_down=!1},sketch.mousemove=function(){if(!mouse_down){var t,s;for(i=0,n=sketch.touches.length;n>i;i++)for(t=sketch.touches[i],s=random(1,4),j=0;s>j;++j)system.addParticles(20,t.x,t.y)}};var canvas=document.getElementById("sketch");window.addEventListener("resize",function(){canvas.width=window.innerWidth,canvas.height=window.innerHeight});